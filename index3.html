<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrazione Utente</title>
</head>
<body>
    <h1>Registrazione Utenteeeeeeeeeeeeeeeeeeee</h1>
    <form id="userForm">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" required>
        <br>
        <label for="cognome">Cognome:</label>
        <input type="text" id="cognome" required>
        <br>
        <!-- Questa Ã¨ una riga di commento -->
        <!-- <button type="button" onclick="SALVADATI()">Salva</button> -->
        <button onclick="SALVADATI()">Clicca qui</button>
    </form>

    <script>
        // Inizializza il database IndexedDB
        const dbName = 'UtentiDB';
        const dbVersion = 1;
        const request = indexedDB.open(dbName, dbVersion);

        request.onupgradeneeded = function(event) {
            const db = event.target.result;
            const objectStore = db.createObjectStore('utenti', { keyPath: 'id', autoIncrement: true });
            objectStore.createIndex('nome', 'nome', { unique: true });
            objectStore.createIndex('cognome', 'cognome', { unique: true });
            objectStore.createIndex('punteggio', 'punteggio');
        };

        request.onsuccess = function(event) {
            const db = event.target.result;

            function SALVADATI() {
                const nome = document.getElementById('nome').value;
                const cognome = document.getElementById('cognome').value;

                const transaction = db.transaction(['utenti'], 'readwrite');
                const objectStore = transaction.objectStore('utenti');

                const request = objectStore.add({ nome, cognome, punteggio: 0 });

                request.onsuccess = function() {
                    console.log('Dati salvati con successo!');
                    // Reindirizza a un link esterno (esempio: Google)
                    window.location.href = 'https://www.google.com';
                };

                request.onerror = function(event) {
                    console.error('Errore durante il salvataggio dei dati:', event.target.error);
                };
            };
        };

        request.onerror = function(event) {
            console.error('Errore durante l\'apertura del database:', event.target.error);
        };
    </script>
</body>
</html>
