<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizza Utenti</title>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            function initDatabase() {
                return new Promise((resolve, reject) => {
                    let request = indexedDB.open('UserDatabase', 1);

                    request.onupgradeneeded = (event) => {
                        let db = event.target.result;
                        if (!db.objectStoreNames.contains('users')) {
                            let objectStore = db.createObjectStore('users', { keyPath: 'id', autoIncrement: true });
                            objectStore.createIndex('nome', 'nome', { unique: false });
                            objectStore.createIndex('cognome', 'cognome', { unique: false });
                        }
                    };

                    request.onsuccess = (event) => {
                        resolve(event.target.result);
                    };

                    request.onerror = (event) => {
                        reject(event.target.error);
                    };
                });
            }

            function getAllUsers(db) {
                return new Promise((resolve, reject) => {
                    let transaction = db.transaction(['users'], 'readonly');
                    let store = transaction.objectStore('users');
                    let request = store.getAll();

                    request.onsuccess = (event) => {
                        resolve(event.target.result);
                    };

                    request.onerror = (event) => {
                        reject(event.target.error);
                    };
                });
            }

            async function displayUsers() {
                let db = await initDatabase();
                let users = await getAllUsers(db);

                let table = document.getElementById('usersTable');
                table.innerHTML = '<tr><th>ID</th><th>Nome</th><th>Cognome</th><th>Punteggio</th></tr>';
                
               
